import math

def calka(x):
    return (x-1)/(x*x+x)

def moja(x):
    return (x*x+5.2)/(math.sin(0.5+0.1*x*x))

class kwad:
    def __init__(self, funcion, a, b, n) -> None:
        self.f = funcion
        self.a = a
        self.b = b
        self.n = n
        if n==2:
            self.wi = [1, 
                       1]
            self.ti = [-0.5773502691896257,
                       0.5773502691896257]
        elif n==4:
            self.wi = [0.6521451548625461,
                       0.6521451548625461,
                       0.3478548451374538,
                       0.3478548451374538]
            self.ti = [-0.3399810435848563,
                       0.3399810435848563,
                       -0.8611363115940526,
                       0.8611363115940526]
        elif n==6:
            self.wi = [0.3607615730481386,
                       0.3607615730481386,
                       0.4679139345726910,
                       0.4679139345726910,
                       0.1713244923791704,
                       0.1713244923791704]
            self.ti = [0.6612093864662645,
                       -0.6612093864662645,
                       -0.2386191860831969,
                       0.2386191860831969,
                       -0.9324695142031521,
                       0.9324695142031521]
        elif n==8:
            self.wi = [0.3626837833783620,
                       0.3626837833783620,
                       0.3137066458778873,
                       0.3137066458778873,
                       0.2223810344533745,
                       0.2223810344533745,
                       0.1012285362903763,
                       0.1012285362903763]
            self.ti = [-0.1834346424956498,
                       0.1834346424956498,
                       -0.5255324099163290,
                       0.5255324099163290,
                       -0.7966664774136267,
                       0.7966664774136267,
                       -0.9602898564975363,
                       0.9602898564975363]
        elif n==10:
            self.wi = [0.2955242247147529,
                       0.2955242247147529,
                       0.2692667193099963,
                       0.2692667193099963,
                       0.2190863625159820,
                       0.2190863625159820,
                       0.1494513491505806,
                       0.1494513491505806,
                       0.0666713443086881,
                       0.0666713443086881]
            self.ti = [-0.1488743389816312,
                       0.1488743389816312,
                       -0.4333953941292472,
                       0.4333953941292472,
                       -0.6794095682990244,
                       0.6794095682990244,
                       -0.8650633666889845,
                       0.8650633666889845,
                       -0.9739065285171717,
                       0.9739065285171717]
        elif n==16:
            self.wi = [0.1894506104550685,
                       0.1894506104550685,
                       0.1826034150449236,
                       0.1826034150449236,
                       0.1691565193950025,
                       0.1691565193950025,
                       0.1495959888165767,
                       0.1495959888165767,
                       0.1246289712555339,
                       0.1246289712555339,
                       0.0951585116824928,
                       0.0951585116824928,
                       0.0622535239386479,
                       0.0622535239386479,
                       0.0271524594117541,
                       0.0271524594117541]
            self.ti = [-0.0950125098376374,
                       0.0950125098376374,
                       -0.2816035507792589,
                       0.2816035507792589,
                       -0.4580167776572274,
                       0.4580167776572274,
                       -0.6178762444026438,
                       0.6178762444026438,
                       -0.7554044083550030,
                       0.7554044083550030,
                       -0.8656312023878318,
                       0.8656312023878318,
                       -0.9445750230732326,
                       0.9445750230732326,
                       -0.9894009349916499,
                       0.9894009349916499]
        else:
            raise Exception("Nie obslugiwane n")
        
        
    def licz(self):
        wynik = (self.b - self.a)/2
        suma = 0
        for i in range (0, self.n):
            suma+=self.wi[i]*self.f(((self.b-self.a)/2)*self.ti[i]+(self.b+self.a)/2)
        return wynik*suma
    
# numer1 = kwad(calka, 2, 3, 2)
# print(numer1.licz())

print("////////////////////////////////")
n2 = kwad(moja, 1, 4, 2)
print("n=2", n2.licz())
n4 = kwad(moja, 1, 4, 4)
print("n=4", n4.licz())
n6 = kwad(moja, 1, 4, 6)
print("n=6", n6.licz())
n8 = kwad(moja, 1, 4, 8)
print("n=8", n8.licz())
n10 = kwad(moja, 1, 4, 10)
print("n=10", n10.licz())
n16 = kwad(moja, 1, 4, 16)
print("n=16", n16.licz())